<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nate WebView OS êµ¬ë¶„ í…ŒìŠ¤íŠ¸</title>
  <script>
    function getOSType() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;

      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
        return "iOS";
      } else if (/android/i.test(userAgent)) {
        return "Android";
      } else {
        return "Web";
      }
    }

    function sendMessage() {
      const osType = getOSType();

      if (osType === "iOS") {
        if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.closeWebview) {
          window.webkit.messageHandlers.closeWebview.postMessage("Hello from JavaScript to iOS!");
        } else {
          alert("iOS ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
      } else if (osType === "Android") {
        if (window.android.closeWebview) {
          window.android.closeWebview;
        } else {
          alert("Android ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
      } else {
        alert("ì§€ì›ë˜ì§€ ì•ŠëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.");
      }
    }

    // Nativeë¡œë¶€í„° ë©”ì‹œì§€ ìˆ˜ì‹  í•¨ìˆ˜ë“¤
    function receiveMessageFromFlutter() {
      alert("âœ… Flutterì—ì„œ ë©”ì‹œì§€ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤!");
    }

    function receiveMessageFromAndroid(msg) {
      alert("âœ… Androidì—ì„œ ë°›ì€ ë©”ì‹œì§€: " + msg);
    }

    function receiveMessageFromiOS(msg) {
      alert("âœ… iOSì—ì„œ ë°›ì€ ë©”ì‹œì§€: " + msg);
    }
  </script>
</head>
<body>
  <h1>Nate WebView OS êµ¬ë¶„ í…ŒìŠ¤íŠ¸</h1>

  <button onclick="sendMessage()">ğŸ“¤ OSì— ë§ê²Œ ë©”ì‹œì§€ ì „ì†¡</button>
</body>
</html>
